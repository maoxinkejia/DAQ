<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qcxk.dao.UserDao">

    <insert id="addUser">
        INSERT INTO `user`
        (
          username,
          password,
          phone,
          real_name,
          del_status,
          del_time,
          create_time,
          device_permission,
          data_list_permission,
          alarm_permission,
          setting_permission,
          original_data_permission,
          user_permission
        ) VALUES (
          #{username},
          #{password},
          #{phone},
          #{realName},
          #{delStatus},
          #{delTime},
          #{createTime},
          #{devicePermission},
          #{dataListPermission},
          #{alarmPermission},
          #{settingPermission},
          #{originalDataPermission},
          #{userPermission}
        )
    </insert>

    <select id="findByUsername" resultType="com.qcxk.model.user.User">
        <include refid="selectUser"/>
        WHERE t.username = #{username}
    </select>

    <sql id="selectUser">
        SELECT
          t.id,
          t.username,
          t.password,
          t.phone,
          t.real_name AS realName,
          t.del_status AS delStatus,
          t.del_time AS delTime,
          t.create_time AS createTime
        FROM
          `user` t
    </sql>
</mapper>