<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qcxk.dao.TerminalDeviceDetailDao">

    <insert id="batchAdd">
        INSERT INTO terminal_device_detail(
          device_num,
          value_type,
          `value`,
          create_time
        ) VALUES
        <foreach collection="list" item="model" separator=",">
            (
            #{model.deviceNum},
            #{model.valueType},
            #{model.value},
            #{model.createTime}
            )
        </foreach>
    </insert>

    <select id="findList" resultType="com.qcxk.model.device.TerminalDeviceDetail">
        <include refid="selectTerminalDeviceDetail"/>
        WHERE t.device_num = #{deviceNum}
        AND t.value_type = #{type}
        AND (t.create_time BETWEEN #{startTime} AND #{endTime})
    </select>

    <select id="findOriginalDataList" resultType="com.qcxk.model.device.TerminalDeviceDetail">
        <include refid="selectTerminalDeviceDetail"/>
        <where>
            <if test="deviceNum != null and deviceNum != ''">
                t.device_num = #{deviceNum} AND
            </if>
            <if test="start != null">
                t.create_time &gt;= #{start} AND
            </if>
            <if test="end != null">
                t.create_time &lt;= #{end}
            </if>
        </where>
    </select>

    <sql id="selectTerminalDeviceDetail">
        SELECT
          t.id,
          t.device_num AS deviceNum,
          t.value_type AS valueType,
          t.value,
          t.create_time AS createTime
        FROM
          terminal_device_detail t
    </sql>
</mapper>